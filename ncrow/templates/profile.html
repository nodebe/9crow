{% extends 'layout.html' %}
  <!-- Secondary Menu
  ============================================= -->
  {% block secondarymenu %}
  <div class="bg-primary">
    <div class="container d-flex justify-content-center">
      <ul class="nav secondary-nav">
      <li class="nav-item"> <a class="nav-link" href="{{url_for('users.userdashboard')}}">Dashboard</a></li>
        <li class="nav-item"> <a class="nav-link active" href="{{url_for('users.userprofile')}}">Account</a></li>
        <li class="nav-item"> <a class="nav-link" href="{{url_for('users.userprofile_bank_accounts')}}">Bank Accounts</a></li>
        <li class="nav-item"> <a class="nav-link" href="{{url_for('users.profile_notifications')}}">Notifications</a></li>
      </ul>
    </div>
  </div>
  {% endblock secondarymenu %}
  <!-- Secondary Menu end --> 
  {% block body %}
    <div class="container py-4">
      <div class="row"> 
        <!-- Left Panel
        ============================================= -->
        <aside class="col-lg-3"> 
          
          <!-- Profile Details
          =============================== -->
          <div class="bg-light shadow-sm rounded text-center p-3 mb-4">
            <div class="profile-thumb mt-3 mb-4"> <img class="rounded-circle" src="../static/images/profile-thumb.jpg" alt="{{current_user.username}}">
              <div class="profile-thumb-edit custom-file bg-primary text-white" data-toggle="tooltip" title="Change Profile Picture"> <i class="fas fa-camera position-absolute"></i>
                <input type="file" class="custom-file-input" id="customFile">
              </div>
            </div>
            <p class="text-3 font-weight-500 mb-2">Hello, {{current_user.fullname}}</p>
            <p class="mb-2"><a href="#edit-personal-details" class="text-5 text-light" data-toggle="modal" title="Edit Profile"><i class="fas fa-edit"></i></a></p>
          </div>
          <!-- Profile Details End -->
          
          <!-- Available Balance
          =============================== -->
          <div class="bg-light shadow-sm rounded text-center p-3 mb-4">
            <div class="text-17 text-light my-3"><i class="fas fa-wallet"></i></div>
            <h3 class="text-9 font-weight-400">â‚¦{{current_user.balance.available}}</h3>
            <p class="mb-2 text-muted opacity-8">Available Balance</p>
            
              {% if current_user.balance.available > 0 %} 
              <hr class="mx-n3">
              <div class="d-flex justify-content-center">
              <a href="{{url_for('transactions.withdraw')}}" class="btn-link">Withdraw</a>
              </div>
              {% endif %}
          </div>
          <!-- Available Balance End --> 
          
          <!-- Need Help?
          =============================== -->
          <div class="bg-light shadow-sm rounded text-center p-3 mb-4">
            <div class="text-17 text-light my-3">
              <i class="fas fa-comments"></i>
            </div>
            <h3 class="text-3 font-weight-400 my-4">Need Help?</h3>
            <p class="text-muted opacity-8 mb-4">Have questions or concerns regrading your account?<br>
              We are always here to help.</p>
            <a href="{{url_for('main.contactus')}}" class="btn btn-primary btn-block">Contact Us</a> 
          </div>
          <!-- Need Help? End --> 
          
        </aside>
        <!-- Left Panel End --> 
        
        <!-- Middle Panel
        ============================================= -->
        <div class="col-lg-9">
          
          <!-- Personal Details
          ============================================= -->
          <div class="bg-light shadow-sm rounded p-4 mb-4">
            <h3 class="text-5 font-weight-400 mb-3">Personal Details <a href="#edit-personal-details" data-toggle="modal" class="float-right text-1 text-uppercase text-muted btn-link"><i class="fas fa-edit mr-1"></i>Edit</a></h3>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">Name</p>
              <p class="col-sm-9">{{current_user.fullname}}</p>
            </div>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">Date of Birth</p>
              <p class="col-sm-9">{{current_user.dob.strftime('%d %b, %Y')}}</p>
            </div>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">Address</p>
              <p class="col-sm-9">{{current_user.address}},<br>
                {{current_user.city}},
                {{current_user.state}},<br>
                {{current_user.country}}.</p>
            </div>
          </div>
          <!-- Edit Details Modal
          ================================== -->
          <div id="edit-personal-details" class="modal fade " role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title font-weight-400">Personal Details</h5>
                  <button type="button" class="close font-weight-400" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body p-4">
                  <form id="personaldetails" method="post" action="{{url_for('users.userprofile', form_type='personal')}}">
                    {{ personal_edit.hidden_tag() }}
                    {% from 'includes/_formhelpers.html' import render_field  %}
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(personal_edit.full_name, class_="form-control", placeholder=current_user.fullname, required="true") }}
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(personal_edit.username, class_="form-control", placeholder=current_user.username, required="true") }}
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          <div class="position-relative">
                            {{ render_field(personal_edit.dob, type="date", class_="form-control", required="true") }}
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <h3 class="text-5 font-weight-400 mt-3">Address</h3>
                        <hr>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(personal_edit.address, class_="form-control", type="text", placeholder="4th Floor, Plot No.22, Above Public Park", required="true") }}
                        </div>
                      </div>
                      <div class="col-12 col-sm-6">
                        <div class="form-group">
                          {{ render_field(personal_edit.city, class_="form-control ", placeholder=current_user.city) }}
                        </div>
                      </div>
                      <div class="col-12 col-sm-6">
                        <div class="form-group">
                          {{ render_field(personal_edit.state, class_="form-control custom-select", placeholder=current_user.state, required="true") }}
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(personal_edit.country, class_="form-control custom-select", placeholder=current_user.country, required="true") }}
                        </div>
                      </div>
                    </div>
                    <button class="btn btn-primary btn-block mt-2" type="submit">Save Changes</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Personal Details End -->

          <!-- Email Addresses
          ============================================= -->
          <div class="bg-light shadow-sm rounded p-4 mb-4">
            <h3 class="text-5 font-weight-400 mb-3">Email Address <a href="#edit-email" data-toggle="modal" class="float-right text-1 text-uppercase text-muted btn-link"><i class="fas fa-edit mr-1"></i>Edit</a></h3>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">Email ID</p>
              <p class="col-sm-9">{{current_user.email}}</p>
            </div>
          </div>
          <!-- Edit Details Modal
          ================================== -->
          <div id="edit-email" class="modal fade " role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title font-weight-400">Email Address</h5>
                  <button type="button" class="close font-weight-400" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body p-4">
                  <form id="emailAddresses" method="post" action="{{url_for('users.userprofile', form_type='email')}}">
                    {{ email_edit.hidden_tag() }}
                    {% from 'includes/_formhelpers.html' import render_field  %}
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(email_edit.email, class_="form-control", placeholder=current_user.email, required="true") }}
                        </div>
                      </div>
                    </div>
                    <button class="btn btn-primary btn-block" type="submit">Save Changes</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Email Addresses End -->
          
          <!-- Phone
          ============================================= -->
          <div class="bg-light shadow-sm rounded p-4 mb-4">
            <h3 class="text-5 font-weight-400 mb-3">Phone <a href="#edit-phone" data-toggle="modal" class="float-right text-1 text-uppercase text-muted btn-link"><i class="fas fa-edit mr-1"></i>Edit</a></h3>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">Mobile</p>
              <p class="col-sm-9">{{current_user.phone}}</p>
            </div>
          </div>
          <!-- Edit Details Modal
          ================================== -->
          <div id="edit-phone" class="modal fade " role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title font-weight-400">Phone</h5>
                  <button type="button" class="close font-weight-400" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body p-4">
                  <form id="phone" method="post" action="{{url_for('users.userprofile', form_type='phone')}}">
                    {{ phone_edit.hidden_tag() }}
                    {% from 'includes/_formhelpers.html' import render_field  %}
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          {{ render_field(phone_edit.phone, class_="form-control", placeholder=current_user.phone, required="true") }}
                        </div>
                      </div>
                    </div>
                    <button class="btn btn-primary btn-block" type="submit">Save Changes</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Phone End -->
          
          <!-- Security
          ============================================= -->
          <div class="bg-light shadow-sm rounded p-4">
            <h3 class="text-5 font-weight-400 mb-3">Security <a href="#change-password" data-toggle="modal" class="float-right text-1 text-uppercase text-muted btn-link"><i class="fas fa-edit mr-1"></i>Edit</a></h3>
            <div class="row">
              <p class="col-sm-3 text-muted text-sm-right mb-0 mb-sm-3">
                <label class="col-form-label">Password</label>
              </p>
              <p class="col-sm-9">
                <input type="password" class="form-control-plaintext" data-bv-field="password" disabled="true" id="password" value="EnterPassword">
              </p>
            </div>
          </div>
          <!-- Edit Details Modal
          ================================== -->
          <div id="change-password" class="modal fade " role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title font-weight-400">Change Password</h5>
                  <button type="button" class="close font-weight-400" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body p-4">
                  <form id="changePassword" method="post" action="{{url_for('users.userprofile', form_type='password')}}">
                    {{ password_edit.hidden_tag() }}
                    {% from 'includes/_formhelpers.html' import render_field  %}
                    <div class="form-group">
                      {{ render_field(password_edit.oldpassword, class_="form-control", required="true") }}
                    </div>
                    <div class="form-group">
                      {{ render_field(password_edit.newpassword, class_="form-control", required="true") }}
                    </div>
                    <div class="form-group">
                       {{ render_field(password_edit.confirm, class_="form-control", required="true") }}
                    </div>
                    <button class="btn btn-primary btn-block mt-4" type="submit">Update Password</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Security End -->
        </div>
        <!-- Middle Panel End --> 
      </div>
    </div>

{% endblock body %}
  <!-- Content end --> 
